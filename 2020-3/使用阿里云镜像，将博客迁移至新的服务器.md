# 使用阿里云镜像，将博客迁移至新的服务器

1. 使用阿里云镜像可以省去重新搭建，否则需要迁移数据库和密码等东西，这样做的目的是因为长期租用一个服务器特别贵，这样做就可以经常更换服务器。
2. 镜像和快照的作用不同,见:[镜像和快照的区别](https://help.aliyun.com/document_detail/111842.html?spm=5176.13910061.sslink.1.5f264844d8Y3AA#section-ovb-trx-fhb),只能使用镜像完成迁移新服务器,快照不可以。
3. 已经自定义阿里云镜像:[blogproject_2020_11_02](),可以使用自定义镜像初始化ECS,初始化时,还可以选择登录服务器密码和自定义镜像中密码一致。
4. 创建完ECS之后,只需做修改三步,即可把博客迁移到新的服务器:
   1. 修改新服务器中setting.py中的ALLOWED_HOSTS,修改原IP地址为ECS的IP地址。
   2. 配置新服务器中Nginx的service_name,在/etc/nginx/sites-available/vtoo.pro中,修改为ECS的IP地址。
   3. 配置vtoo.pro的域名(或者新的域名)解析,使其解析到新的IP地址中(这一步之前,就可以输入IP地址进行访问博客)。
5. github中新建了一个分支backup,用这个分支进行博客备份和迁移到新的服务器,这样可以防止修改主服务器的代码。
6. 因为使用了镜像,所以不用重新配置环境和重新设置数据库,只需要改两个IP地址和域名解析。
7. 已经在2020年11月2日完成了前两步,可以使用新的IP地址(一星期后过期)访问新的博客,因为没有新的域名,所以暂时先没试验第三步。